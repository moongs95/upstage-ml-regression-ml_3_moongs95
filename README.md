<!-- Header -->
<div align="center">
  <img src="https://capsule-render.vercel.app/api?type=waving&color=timeGradient&text=ML%20Group3%20Third%20Party%20👋&animation=twinkling&fontSize=35&fontAlignY=40&fontAlign=70&height=250&width=800" style="width:800px; display:block; margin:auto;">
</div>

<h2 align="center">🧑‍💼👩‍💼👩‍💼 Introduce Our Team 👩‍💼👩‍💼👨‍💼</h2>
<div align="center">

<table>
<tr>
<td align="center">
  <div style="background-color:#9370db; style="width:100px; height:100px; overflow:hidden; border-radius:50%;">
    <img src="https://avatars.githubusercontent.com/u/89570502?v=4" width="200" height="200" style="border-radius:50%"><br>
    <b>권문진 (팀장)</b><br>
    Preprocessing, Feature Engineering,<br>
    Data EDA (Making material), Modeling
  </div>
</td>
<td align="center">
  <div style="background-color:#8a2be2; style="width:100px; height:100px; overflow:hidden; border-radius:50%;">
    <img src="https://avatars.githubusercontent.com/u/221927853?v=4" width="200" height="200" style="border-radius:50%"><br>
    <b>고민서</b><br>
    Preprocessing, Feature Engineering,<br>
    Data EDA (Making material), Modeling
  </div>
</td>
<td align="center">
  <div style="background-color:#7b68ee; style="width:100px; height:100px; overflow:hidden; border-radius:50%;">
    <img src="https://avatars.githubusercontent.com/u/219617394?v=4" width="200" height="200" style="border-radius:50%"><br>
    <b>허예경</b><br>
    Data Collection, Feature Engineering, Modeling
  </div>
</td>
</tr>
<tr>
<td align="center">
  <div style="background-color:#9370db; style="width:100px; height:100px; overflow:hidden; border-radius:50%;">
    <img src="https://avatars.githubusercontent.com/u/221468673?v=4" width="200" height="200" style="border-radius:50%"><br>
    <b>김동근</b><br>
    Data Collection, Domain Knowledge for Consultation and Literature Analysis,<br>
    Data EDA Analyze, Modeling
  </div>
</td>
<td align="center">
  <div style="background-color:#9370db; style="width:100px; height:100px; overflow:hidden; border-radius:50%;">
    <img src="https://avatars.githubusercontent.com/u/218931464?v=4" width="200" height="200" style="border-radius:50%"><br>
    <b>이수민</b><br>
    Data Collection, Domain Knowledge for Consultation and Literature Analysis,<br>
    Data EDA Analyze, Modeling
  </div>
</td>
<td align="center">
  <div style="background-color:#9370db; style="width:100px; height:100px; overflow:hidden; border-radius:50%;">
    <img src="https://avatars.githubusercontent.com/u/228438426?v=4" width="200" height="200" style="border-radius:50%"><br>
    <b>이승호</b><br>
    Data Collection
  </div>
</td>
</tr>
</table>


---
## 0. Overview

### 💻 Tech Stack:
![NumPy](https://img.shields.io/badge/numpy-%23013243.svg?style=for-the-badge&logo=numpy&logoColor=white) ![Pandas](https://img.shields.io/badge/pandas-%23150458.svg?style=for-the-badge&logo=pandas&logoColor=white) ![scikit-learn](https://img.shields.io/badge/scikit--learn-%23F7931E.svg?style=for-the-badge&logo=scikit-learn&logoColor=white) ![Google Cloud](https://img.shields.io/badge/GoogleCloud-%234285F4.svg?style=for-the-badge&logo=google-cloud&logoColor=white) ![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54) ![Matplotlib](https://img.shields.io/badge/Matplotlib-%23ffffff.svg?style=for-the-badge&logo=Matplotlib&logoColor=black)

## 1. Competiton Info

### Overview

### House Price Prediction | 아파트 실거래가 예측
<img width="1441" height="433" alt="image" src="https://github.com/user-attachments/assets/24d33894-2893-4418-9529-e7a105007d87" />
서울시 아파트 실거래가 매매 데이터를 기반으로 아파트 가격을 예측하는 대회


#### 소개
House Price Prediction 경진대회는 주어진 데이터를 활용하여 서울의 아파트 실거래가를 효과적으로 예측하는 모델을 개발하는 대회입니다. 

부동산은 의식주에서의 주로 중요한 요소 중 하나입니다. 이러한 부동산은 아파트 자체의 가치도 중요하고, 주변 요소 (강, 공원, 백화점 등)에 의해서도 영향을 받아 시간에 따라 가격이 많이 변동합니다. 개인에 입장에서는 더 싼 가격에 좋은 집을 찾고 싶고, 판매자의 입장에서는 적절한 가격에 집을 판매하기를 원합니다. 부동산 실거래가의 예측은 이러한 시세를 예측하여 적정한 가격에 구매와 판매를 도와주게 합니다. 그리고, 정부의 입장에서는 비정상적으로 시세가 이상한 부분을 체크하여 이상 신호를 파악하거나, 업거래 다운거래 등 부정한 거래를 하는 사람들을 잡아낼 수도 있습니다. 

<img width="698" height="285" alt="unnamed" src="https://github.com/user-attachments/assets/476859b6-5846-4802-b2cc-703e5ac63279" />

저희는 이러한 목적 하에서 다양한 부동산 관련 의사결정을 돕고자 하는 부동산 실거래가를 예측하는 모델을 개발하는 것입니다. 특히, 가장 중요한 서울시로 한정해서 서울시의 아파트 가격을 예측하려고합니다.

참가자들은 대회에서 제공된 데이터셋을 기반으로 모델을 학습하고, 서울시 각 지역의 아파트 매매 실거래가를 예측하는데 중점을 둡니다. 이를 위해 선형 회귀, 결정 트리, 랜덤 포레스트, 혹은 딥 러닝과 같은 다양한 regression 알고리즘을 사용할 수 있습니다.

제공되는 데이터셋은 총 네가지입니다. 첫번째는 국토교통부에서 제공하는 아파트 실거래가 데이터로 아파트의 위치, 크기, 건축 연도, 주변 시설 및 교통 편의성과 같은 다양한 특징들을 포함하고 있습니다. 두번째와 세번째 데이터는 추가 데이터로, 서울시에서 제공하는 지하철역과 버스정류장에 대한 다양한 정보들을 포함하고 있습니다. 마지막 네번째 데이터는 평가 데이터로, 최종 모델성능에 대한 검증을 위해 사용됩니다.

참가자들은 이러한 다양한 변수와 데이터를 고려하여 모델을 훈련하고, 아파트의 실거래가에 대한 예측 성능을 높이기 위한 최적의 방법을 찾아야 합니다.

<img width="873" height="359" alt="unnamed" src="https://github.com/user-attachments/assets/f395f701-7678-4518-86eb-0181cc6fbbec" />

경진대회의 목표는 정확하고 일반화된 모델을 개발하여 아파트 시장의 동향을 미리 예측하는 것입니다. 이를 통해 부동산 관련 의사 결정을 돕고, 효율적인 거래를 촉진할 수 있습니다. 또한, 참가자들은 모델의 성능을 평가하고 다양한 특성 간의 상관 관계를 심층적으로 이해함으로써 데이터 과학과 머신 러닝 분야에서의 실전 경험을 쌓을 수 있습니다.


### ⏰ Timeline

| Date              | Task                                  |
|-------------------|---------------------------------------|
| 2025.09.01 10:00  | 🚀 Start Competition                  |
| 2025.09.02-09.05  | 📊 Data Collection & Feature Engineering |
| 2025.09.08-09.11  | 🔎 Data EDA, Modeling, Summary        |
| 2025.09.11 19:00  | 🏁 End Competition                    |

## 2. Components

### Directory

```
├── 00_ETC
│
├── 01_Preprocessing
│
├── 02_EDA 
│
└── 03_Modeling
│ 
└── modeling_code.ipynb
```

## 3. Data descrption

#### 🏗️ Feature Engineering 요약

### 🔧 Feature Engineering

**내부 데이터**
- 전용면적 파생변수  
- 연식 / 신축 / 재건축 여부  
- 강남권 여부  
- 학군, Zone  
- 프리미엄 아파트 여부  

**외부 데이터**
- 대장아파트 거리 (log, 구간화)  
- 경제지표 (회사채금리, 매매가격지수, 건설공사비지수, 거래량 등)  
- 교통 (가장 가까운 버스/지하철 거리, 1km 이내 지하철 개수, 구간화)  
- 학교 (1km 이내 학교 수, 초등학교 거리(구간화), 엘리트 고교 여부)  
- 시계열 (계약년월 가중치, 그룹별 rolling 평균 3M/6M)


### 🔍 Feature Selection
1. **도메인 기반** 필요 없는 열 제거  
2. 범주형 → **카이제곱 검정**, 수치형 → **스피어만 상관계수 (p < 0.05)**  
3. 모델 학습 후 **Feature Importance** + RMSE 비교 → 최종 변수 선택

#### 🔍 EDA Feature 활용 목록

- 거래가격 분포  
- 건축년도 분포  
- 건축년도와 거래가격의 관계  
- 전용면적 분포  
- 전용면적과 거래가격의 관계  
- 강남권/비강남권 구분 기준: 서울시 구별 평균 거래가  
- 연식별 거래가격 (강남권/비강남권)  
- 층 수 분포  
- 층 수별 거래가격  
- 제곱미터 당 평균 단가 분포 (추가 요청)  
- 아파트 브랜드별 평균 거래가격 (EDA 분석계획서 기반, 아파트명 라벨링)  
- 월별 평균 거래가격 (아쉬운 점)  

#### 1️⃣ 초기 Column 수정
- 초기 데이터 구조 점검 및 불필요 변수 제거  
- **아파트명 라벨링** → 브랜드별 그룹화  
- 기본 파생 Feature 생성  


#### 2️⃣ 결측치 처리
- **70% 이상 결측치 컬럼 삭제** (데이터 오염 방지)  
- **X, Y 좌표 삭제 이유**  
  - 번지, 본번, 부번, 도로명 등을 활용해 **지오코딩(네이버 API)**으로 대체  
- 시군구, 번지, 본번, 부번, 도로명은 **중복/유사 정보** → `구` 데이터만 사용  


#### 3️⃣ 이상치 처리
- **마이너스 층 삭제**  
- **층 데이터 자체는 삭제** (모델 성능 개선 미미)  
- 층 구간화 시도 (≤5층 / 6~15층 / ≥16층) → **최종적으로 사용하지 않음**  


### ⏳ Time Split 전략

#### 🔹 2020 ~ 2023 데이터만 사용 (최종 전략)
- 아파트 가격 ↔ 금리(회사채 금리) **상관관계 존재**  
- 아파트 가격 ↔ 아파트 매매량 **유의미한 연관**  
- **물가(건설공사비지수) 상승 → 아파트 매매가 상승**  
- → 코로나 이후 시점 반영 & 단기 예측(2023.07~09)에 적합  

#### 🔹 2015년 이후 데이터 사용 (실험 → 폐기)
- **강사님 추천** + 데이터 수 확보 목적  
- Val RMSE는 낮았으나 **Test RMSE 높음 (과적합 심화)**  
- 2015년 데이터가 가장 풍부 + 교육과정 개편 등 도메인 요소 고려  
- → 실제 모델 성능 저하로 최종적으로는 **사용하지 않음**  


## 4. Modeling
## 📌 Modeling Strategy

### 🥇 최종 전략 요약
- 단순히 feature 개수를 늘리거나 결측치를 무리하게 보간하는 것이 효과적이지 않다고 판단  
- **단기 예측(2023.07~09)**을 위한 변수 설계 + **시계열적 경향성 반영**에 집중  
- Optuna & Weights & Biases(⚡wandb)로 하이퍼파라미터 최적화  
- 최종적으로 **과적합을 최소화**하고 제출 성능 확보

---

### 🛠️ 전략별 진행 과정

#### 🔹 전략 1
- 결측치가 많은 칼럼은 삭제 (데이터 오염 방지)  
- **2020년 데이터부터 사용** (코로나 시점 이후 단기 예측 집중)  
- 결측치 처리 : `xy 좌표 → 네이버 API Geocoding`  
- 다양한 파생변수 생성 후 모델링  
- **Val RMSE ≈ 10000**


#### 🔹 전략 2
- 데이터 분포가 많은 **2015년부터 활용**  
- 결측치 제거 + 파생/구간화 변수 추가  
- **전용면적 기반 파생변수** 반영  
- Val RMSE : **6000~7000**  
- 제출 RMSE : **19000~20000** (과적합 발생)


#### 🔹 전략 3
- 앙상블 + 파라미터 조정 + feature 추가  
- 초기 제거했던 결측치 열 → **보간하여 feature 확장**  
- 다양한 파생변수 추가 후 모델링  
- **Val RMSE 오히려 상승**, 제출 RMSE도 높음  
- → Feature 개수 문제가 아님을 확인


#### 🔹 최종 전략
- 다시 **전략 1로 회귀**  
- **2020년 이후 데이터** 활용, 단기 예측에 초점  
- 시계열 변수 추가
  - 계약년월 가중치  
  - 구별 평균 거래가격 `rolling (3M, 6M)`  
- Optuna + wandb 로 최적화  
- **Val RMSE ≈ 13000** (과적합 가장 잘 방지)

## 🎯 Feature Selection

1. **도메인 기반** 필요 없는 열 제거  
2. **통계 기반 선택**  
   - 범주형: 카이제곱 검정  
   - 수치형: 스피어만 상관계수 (p-value < 0.05)  
3. **모델 기반 중요도 확인**  
   - 학습 시 Feature Importance와 RMSE 비교를 통해 최종 Feature 선택

---

## 🛠️ Modeling Approach

- 데이터 특성: 일부 시계열성을 띄지만, 멀티피처 데이터이므로 **트리 기반 모델이 예측에 유리**
- 주로 사용 모델: **Random Forest, LightGBM, XGBoost**  
- 앙상블 시도: RMSE 개선 목적이나 단일 모델과 차이가 크지 않아 주로 단일 모델 활용

---

### 📊 모델별 특징 및 장점

| 모델 | 특성 | 장점 |
|------|------|------|
| **Linear Regressor** | 선형 관계 기반 | - Feature 영향력 계수 확인 가능<br>- 단순하고 해석 용이<br>- 빠른 학습<br>- 과적합 위험 낮음 |
| **Random Forest (RF)** | 여러 결정트리를 평균 | - 비선형 관계 처리 가능<br>- 이상치·결측치에 강함<br>- Feature 중요도 확인 가능 |
| **LightGBM (LGBM)** | Gradient Boosting + GOSS/EFB | - 빠른 학습 속도<br>- 큰 데이터셋 처리 효율적<br>- 정확도 높음<br>- 범주형 자동 처리 |
| **XGBoost** | Gradient Boosting 개선 | - Regularization 내장<br>- Parallel 학습 가능<br>- 과적합 방지<br>- 다양한 하이퍼파라미터 튜닝 |
| **CatBoost** | Gradient Boosting | - 범주형 자동 처리<br>- Ordered Boosting 사용<br>- 과적합 방지<br>- 초보자도 튜닝 간단 |
| **Ensemble** | 여러 모델 결합 | - 안정적 성능 확보<br>- 단일 모델보다 일반화 성능 높음<br>- 개별 모델 단점 보완 가능 |

---

## 5. Result

### Leader Board

<img width="1104" height="646" alt="image" src="https://github.com/user-attachments/assets/15349317-caae-4e35-8ef0-f2f6572fb8f0" />

### 🏆 Result

<p align="center">
  <img src="https://img.shields.io/badge/Rank-3 (Bronze)-%23cd7f32?style=for-the-badge&logo=none" />
  <img src="https://img.shields.io/badge/Final%20Score(RMSE)-12533.7751-blue?style=for-the-badge" />
</p>


### Presentation

- [presentation_ML_3](https://docs.google.com/presentation/d/1M4dh_IMY0V_12uo0VZtjiJmDvpq5_pis/edit?slide=id.p1#slide=id.p1)

## etc

### 🤝 Meeting

| 디스코드 활용 | 구글 드라이브 활용 |
|---------------|-------------------|
| <img width="600" src="https://github.com/user-attachments/assets/dc42cdaf-35da-41e5-871b-add308a9a27d" /> | <img width="300" src="https://github.com/user-attachments/assets/f143dadf-34cb-4259-87a9-0370d42d156d" /> |

---

## 📚 Reference

- 🏠 [아파트 매매가 횡단면 분석](https://rstudio-pubs-static.s3.amazonaws.com/770609_5fa09d74e4b64257aa56fd6aef42d7fe.html)
- 📈 [아파트 전세가율의 변동](https://www.ejrea.org/archive/view_article?pid=jrea-9-2-95)
- 📑 [관련 논문 (KISS)](http://lps3.kiss.kstudy.com.kims.kmu.ac.kr/Detail/Ar?key=4005911)
- 📍 [주소 추출](https://www.biz-gis.com/index.php?mid=QnA&page=134&listStyle=list&m=0&document_srl=27034)
- 🦠 [코로나19 팬데믹 기간 아파트가격 결정](https://scienceon.kisti.re.kr/commons/util/originalView.do?cn=JAKO202309672000765&dbt=JAKO&koi=KISTI1.1003%2FJNL.JAKO202309672000765)
- 📑 [관련 논문 (건국대)](https://konkuk.dcollection.net/public_resource/pdf/200000686187_20250904110840.pdf)
  
---
## 📊 Data Sources
- 🗺️ [네이버 클라우드 플랫폼 - 지도 API](https://www.ncloud.com/product/applicationService/maps)
- 🎓 교육 데이터 [서울 열린데이터 광장](https://data.seoul.go.kr/)  
- 🏠 [KB부동산 리브온 데이터허브](https://datahub.kbland.kr/)
- 🏗️ 건설 경제 데이터 [KOSIS 국가통계포털 건설공사비지수](https://kosis.kr/)

 📌 참고사항 : 모든 데이터는 각 출처에서 제공하는 공공데이터 및 API를 기반으로 수집되었습니다.  


